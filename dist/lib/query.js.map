{"version":3,"file":"query.js","sourceRoot":"","sources":["../../src/lib/query.ts"],"names":[],"mappings":"AAAA,OAAO,MAAM,MAAM,yBAAyB,CAAC;AAC7C,OAAO,eAAe,CAAC;AACvB,8CAA8C;AAC9C,4CAA4C;AAG5C,2CAA2C;AAE3C,IAAI;AAEJ,MAAM,CAAC,KAAK,UAAU,eAAe;IACjC,MAAM,GAAG,GAAG;;;;;;;;;;;;;;;;KAgBX,CAAC;IAEF,MAAM,EAAC,IAAI,EAAC,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAEvC,OAAO,IAAI,CAAC;AAChB,CAAC;AAEE,MAAM,CAAC,KAAK,UAAU,iBAAiB;IACtC,MAAM,GAAG,GAAG;;sBAEM,CAAC;IACnB,MAAM,EAAC,IAAI,EAAC,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACvC,OAAO,IAAI,CAAC;AACb,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,WAAW;IAChC,MAAM,GAAG,GAAG;;iBAEC,CAAC;IACd,MAAM,EAAC,IAAI,EAAC,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACvC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;IACnB,OAAO,IAAI,CAAC;AACb,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,UAAU,CAAC,IAAY;IAC5C,MAAM,GAAG,GAAG;;KAEX,CAAC;IAEF,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAA;AAChC,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,UAAU,CAAC,KAAa,EAAE,MAAc,EAAE,OAAe;IAChF,MAAM,GAAG,GAAG;;;GAGX,CAAC;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;IACnE,OAAO,IAAI,CAAC;AACd,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,cAAc,CAAC,UAAkB,EAAE,SAAiB,EAAE,OAAe,EAAE,UAAyB;IACpH,MAAM,GAAG,GAAG;;;;GAIX,CAAC;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC;IACvF,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;AACjB,CAAC;AAAA,CAAC;AAEF,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,WAAmB,EAAE,OAAe,EAAE,UAAyB;IACpG,MAAM,GAAG,GAAG;;;;;KAKX,CAAC;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,UAAU,EAAE,WAAW,CAAC,CAAC,CAAC;IAC7E,OAAO,IAAI,CAAC,CAAC,CAAC,CAAC;AACjB,CAAC","sourcesContent":["import client from \"../config/connection.js\";\nimport 'console.table';\n// import { updateEmployee } from \"./menu.js\";\n// export async function getAllEmployess() {\n\n\n// export async function updateEmployee() {\n    \n// }\n\nexport async function getAllEmployees() {\n    const sql = `\n    SELECT\n    employees.id AS id,\n    employees.first_name AS first_name,\n    employees.last_name AS last_name,\n    title,\n    name AS department_name,\n    salary,\n    CONCAT(managers.first_name, ' ', managers.last_name) AS manager\n    FROM employees\n    JOIN roles\n     ON employees.role_id = roles.id\n     JOIN department\n    ON roles.dept_id = department.id\n    LEFT JOIN employees as managers\n        ON employees.manager_id = managers.id\n    `;\n\n    const {rows} = await client.query(sql);\n   \n    return rows;\n}\n\n   export async function getAllDepartments() {\n    const sql = `\n    SELECT\n    * FROM department`;\n    const {rows} = await client.query(sql);\n    return rows;\n   }\n\n   export async function getAllRoles() {\n    const sql = `\n    SELECT\n    * FROM roles`;\n    const {rows} = await client.query(sql);\n    console.table(rows)\n    return rows;\n   }\n\n   export async function createDept(name: string) {\n    const sql = `\n    INSERT INTO department (name) VALUES ($1)\n    `;\n\n    await client.query(sql, [name])\n   }\n\n   export async function createRole(title: string, salary: number, dept_id: number) {\n  const sql = `\n  INSERT INTO roles (title, salary, dept_id)\n  VALUES ($1, $2, $3)\n  `;\n  const { rows } = await client.query(sql, [title, salary, dept_id]);\n  return rows;\n}\n\nexport async function createEmployee(first_name: string, last_name: string, role_id: number, manager_id: number | null) {\n  const sql = `\n  INSERT INTO employees (first_name, last_name, role_id, manager_id)\n  VALUES ($1, $2, $3, $4)\n  ;\n  `;\n  const { rows } = await client.query(sql, [first_name, last_name, role_id, manager_id]);\n  return rows[0];\n};\n\nexport async function updateEmployeeInDB(employee_id: number, role_id: number, manager_id: number | null) {\n    const sql = `\n    UPDATE employees\n    SET role_id = $1, manager_id = $2\n    WHERE id = $3\n    ;\n    `;\n    const { rows } = await client.query(sql, [role_id, manager_id, employee_id]);\n    return rows[0];\n  }\n\n"]}